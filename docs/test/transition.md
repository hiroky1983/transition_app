# 日本語-ベトナム語学習アプリ テストシナリオ

## 概要

本ドキュメントは、Web 版（Next.js）と Mobile 版（React Native/Expo）の両プラットフォームにおける機能テストシナリオを定義します。各機能の正常系・異常系・境界値テストを網羅し、ユーザビリティとパフォーマンスの観点も含めた包括的なテスト計画を提供します。

## テスト環境

### Web 版

- **ブラウザ**: Chrome, Firefox, Safari, Edge
- **デバイス**: デスクトップ、タブレット、モバイル（レスポンシブ）
- **URL**: http://localhost:3000

### Mobile 版

- **プラットフォーム**: iOS, Android
- **テスト方法**: Expo Go, 実機テスト
- **デバイス**: iPhone, Android 端末

## 1. ナビゲーション機能テスト

### 1.1 Web 版ナビゲーション

#### 正常系テスト

| テストケース | 操作手順                     | 期待結果                                           |
| ------------ | ---------------------------- | -------------------------------------------------- |
| NAV-W-001    | トップページ（/）にアクセス  | 翻訳ページが表示され、「翻訳」タブがアクティブ状態 |
| NAV-W-002    | 「単語帳一覧」タブをクリック | /vocabulary に遷移し、単語帳一覧が表示             |
| NAV-W-003    | 「会話練習」タブをクリック   | /talk に遷移し、会話練習画面が表示                 |
| NAV-W-004    | ブラウザの戻るボタンを使用   | 前のページに正常に戻る                             |

#### レスポンシブテスト

| テストケース | 操作手順                                 | 期待結果                         |
| ------------ | ---------------------------------------- | -------------------------------- |
| NAV-W-005    | モバイル画面サイズでナビゲーション確認   | ナビゲーションが適切に表示される |
| NAV-W-006    | タブレット画面サイズでナビゲーション確認 | レイアウトが崩れない             |

### 1.2 Mobile 版ナビゲーション

#### 正常系テスト

| テストケース | 操作手順               | 期待結果                                         |
| ------------ | ---------------------- | ------------------------------------------------ |
| NAV-M-001    | アプリ起動             | 翻訳画面が表示され、下部タブで「翻訳」が選択状態 |
| NAV-M-002    | 「単語帳」タブをタップ | 単語帳画面に遷移                                 |
| NAV-M-003    | 「会話」タブをタップ   | 会話練習画面に遷移                               |
| NAV-M-004    | タブ間の高速切り替え   | スムーズに画面遷移する                           |

## 2. 翻訳機能テスト

### 2.1 基本翻訳機能

#### 正常系テスト

| テストケース | 操作手順                                     | 期待結果                                   |
| ------------ | -------------------------------------------- | ------------------------------------------ |
| TRANS-001    | 「こんにちは」を入力して翻訳ボタンをクリック | 「Xin chào」が表示される                   |
| TRANS-002    | 「ありがとう」を入力して翻訳                 | 「Cảm ơn」が表示される                     |
| TRANS-003    | 既存の単語を入力（Notion に保存済み）        | 既存データが表示され、タグが自動選択される |
| TRANS-004    | 翻訳結果の音声再生ボタンをクリック           | ベトナム語音声が再生される                 |

#### 異常系テスト

| テストケース | 操作手順                            | 期待結果                                         |
| ------------ | ----------------------------------- | ------------------------------------------------ |
| TRANS-005    | 空文字で翻訳ボタンをクリック        | 「単語を入力してください」エラーメッセージが表示 |
| TRANS-006    | 特殊文字のみ入力（@#$%）            | 適切なエラーハンドリングまたは翻訳結果           |
| TRANS-007    | 非常に長いテキスト（1000 文字以上） | 適切な制限またはエラーメッセージ                 |
| TRANS-008    | ネットワーク切断状態で翻訳実行      | 「翻訳に失敗しました」エラーメッセージ           |

#### 境界値テスト

| テストケース | 操作手順                | 期待結果         |
| ------------ | ----------------------- | ---------------- |
| TRANS-009    | 1 文字の入力（「あ」）  | 正常に翻訳される |
| TRANS-010    | 100 文字の入力          | 正常に翻訳される |
| TRANS-011    | 数字のみ入力（「123」） | 適切に処理される |

### 2.2 タグ機能テスト

#### 正常系テスト

| テストケース | 操作手順                         | 期待結果                       |
| ------------ | -------------------------------- | ------------------------------ |
| TAG-001      | 翻訳後、既存タグを選択して保存   | 選択したタグで保存される       |
| TAG-002      | 新しいタグを作成して保存         | 新しいタグが作成され保存される |
| TAG-003      | 複数タグを選択して保存（Web 版） | 複数タグで保存される           |
| TAG-004      | タグなしで保存                   | タグなしで保存される           |

#### Mobile 版タグテスト

| テストケース | 操作手順                  | 期待結果                         |
| ------------ | ------------------------- | -------------------------------- |
| TAG-M-001    | タグをタップして選択/解除 | 視覚的フィードバックが表示される |
| TAG-M-002    | 複数タグの選択            | 複数選択が可能                   |

### 2.3 保存機能テスト

#### 正常系テスト

| テストケース | 操作手順                   | 期待結果                                 |
| ------------ | -------------------------- | ---------------------------------------- |
| SAVE-001     | 翻訳結果を保存             | 「保存しました」トーストメッセージが表示 |
| SAVE-002     | 保存後、フォームがリセット | 入力フィールドとタグ選択がクリア         |
| SAVE-003     | 保存後、単語帳で確認       | 保存した単語が単語帳に表示される         |

#### 異常系テスト

| テストケース | 操作手順                   | 期待結果                                 |
| ------------ | -------------------------- | ---------------------------------------- |
| SAVE-004     | ネットワーク切断状態で保存 | 「保存に失敗しました」エラーメッセージ   |
| SAVE-005     | 同じ単語を重複保存         | 適切なハンドリング（更新または重複防止） |

## 3. 単語帳機能テスト

### 3.1 一覧表示機能

#### 正常系テスト

| テストケース | 操作手順               | 期待結果                             |
| ------------ | ---------------------- | ------------------------------------ | ----------------------- |
| VOCAB-001    | 単語帳ページにアクセス | 保存済み単語が一覧表示される         |
| VOCAB-002    | 統計情報の確認         | 「総単語数: X                        | 表示中: Y」が正しく表示 |
| VOCAB-003    | 単語カードの表示確認   | 日本語、ベトナム語、タグが正しく表示 |

#### データなしテスト

| テストケース | 操作手順                   | 期待結果                                     |
| ------------ | -------------------------- | -------------------------------------------- |
| VOCAB-004    | データが空の状態でアクセス | 「単語帳が空です」メッセージと追加リンク表示 |

### 3.2 検索機能テスト

#### 正常系テスト

| テストケース | 操作手順                         | 期待結果                             |
| ------------ | -------------------------------- | ------------------------------------ |
| SEARCH-001   | 日本語で検索（「こんにちは」）   | 該当する単語のみ表示される           |
| SEARCH-002   | ベトナム語で検索（「Xin chào」） | 該当する単語のみ表示される           |
| SEARCH-003   | タグで検索（「日常会話」）       | 該当タグの単語のみ表示される         |
| SEARCH-004   | 部分一致検索（「こん」）         | 「こんにちは」「こんばんは」等が表示 |
| SEARCH-005   | 大文字小文字混在検索             | 正しく検索される                     |

#### 異常系テスト

| テストケース | 操作手順             | 期待結果                                   |
| ------------ | -------------------- | ------------------------------------------ |
| SEARCH-006   | 存在しない単語で検索 | 「検索条件に一致する単語が見つかりません」 |
| SEARCH-007   | 特殊文字で検索       | 適切にハンドリングされる                   |

#### リアルタイム検索テスト

| テストケース | 操作手順                               | 期待結果                           |
| ------------ | -------------------------------------- | ---------------------------------- |
| SEARCH-008   | 文字入力中のリアルタイムフィルタリング | 入力に応じて即座に結果が更新される |
| SEARCH-009   | 検索文字列をクリア                     | 全ての単語が再表示される           |

### 3.3 Mobile 版特有テスト

#### 正常系テスト

| テストケース | 操作手順             | 期待結果                         |
| ------------ | -------------------- | -------------------------------- |
| VOCAB-M-001  | プルトゥリフレッシュ | データが再読み込みされる         |
| VOCAB-M-002  | スクロール動作       | スムーズにスクロールできる       |
| VOCAB-M-003  | ローディング状態     | スピナーとメッセージが表示される |

#### エラーハンドリングテスト

| テストケース | 操作手順             | 期待結果                                   |
| ------------ | -------------------- | ------------------------------------------ |
| VOCAB-M-004  | ネットワークエラー時 | 「単語帳の取得に失敗しました」アラート表示 |

## 4. 会話練習機能テスト

### 4.1 音声入力機能テスト

#### 正常系テスト（Web 版）

| テストケース | 操作手順                           | 期待結果                                     |
| ------------ | ---------------------------------- | -------------------------------------------- |
| VOICE-W-001  | 「音声入力を開始」ボタンをクリック | マイクアクセス許可ダイアログが表示           |
| VOICE-W-002  | マイクアクセスを許可               | 録音状態になり、ボタンが「録音を停止」に変化 |
| VOICE-W-003  | ベトナム語で話して録音停止         | 音声認識結果がテキストフィールドに表示       |
| VOICE-W-004  | 認識結果を編集                     | テキスト編集モードに切り替わる               |

#### 正常系テスト（Mobile 版）

| テストケース | 操作手順               | 期待結果                                     |
| ------------ | ---------------------- | -------------------------------------------- |
| VOICE-M-001  | 音声入力ボタンをタップ | マイクアクセス許可ダイアログが表示           |
| VOICE-M-002  | 録音中の状態確認       | ボタンの色が変化し、録音中であることが分かる |
| VOICE-M-003  | 録音停止後の処理       | 「処理中...」表示後、認識結果が表示          |

#### 異常系テスト

| テストケース | 操作手順                       | 期待結果                                   |
| ------------ | ------------------------------ | ------------------------------------------ |
| VOICE-E-001  | マイクアクセスを拒否           | 「マイクへのアクセスに失敗しました」エラー |
| VOICE-E-002  | 無音状態で録音                 | 適切なエラーメッセージまたは再試行促進     |
| VOICE-E-003  | ネットワーク切断状態で音声送信 | 「音声入力の処理に失敗しました」エラー     |

### 4.2 AI 会話機能テスト

#### 正常系テスト

| テストケース | 操作手順             | 期待結果                             |
| ------------ | -------------------- | ------------------------------------ |
| AI-001       | 「Xin chào」を送信   | AI がベトナム語で適切に応答          |
| AI-002       | 日本語で質問を送信   | AI がベトナム語で応答                |
| AI-003       | 複数回の会話継続     | 会話履歴が正しく表示される           |
| AI-004       | 長い会話での履歴確認 | スクロールして過去の会話が確認できる |

#### 異常系テスト

| テストケース | 操作手順                 | 期待結果                                 |
| ------------ | ------------------------ | ---------------------------------------- |
| AI-E-001     | 空メッセージを送信       | 送信ボタンが無効状態                     |
| AI-E-002     | ネットワークエラー時     | 「メッセージの送信に失敗しました」エラー |
| AI-E-003     | 非常に長いメッセージ送信 | 適切な制限またはエラーハンドリング       |

### 4.3 会話 UI 機能テスト

#### 正常系テスト

| テストケース | 操作手順                     | 期待結果                                   |
| ------------ | ---------------------------- | ------------------------------------------ |
| UI-001       | ユーザーメッセージの表示確認 | 右寄せ、青背景で表示                       |
| UI-002       | AI メッセージの表示確認      | 左寄せ、白背景で表示                       |
| UI-003       | 音声再生ボタンの確認         | AI メッセージに音声ボタンが表示            |
| UI-004       | 編集モードの切り替え         | 音声入力とテキスト入力の切り替えが正常動作 |

#### Mobile 版特有テスト

| テストケース | 操作手順                     | 期待結果                         |
| ------------ | ---------------------------- | -------------------------------- |
| UI-M-001     | キーボード表示時のレイアウト | 会話エリアが適切にリサイズされる |
| UI-M-002     | 長いメッセージの表示         | 適切に改行され、読みやすく表示   |

## 5. パフォーマンステスト

### 5.1 レスポンス時間テスト

| 機能           | 期待レスポンス時間 | 測定方法                       |
| -------------- | ------------------ | ------------------------------ |
| 翻訳 API       | < 2 秒             | ネットワークタブで測定         |
| 音声認識       | < 5 秒             | 録音停止から結果表示まで       |
| 単語帳読み込み | < 3 秒             | ページ読み込み完了まで         |
| AI 応答        | < 10 秒            | メッセージ送信から応答表示まで |

### 5.2 メモリ使用量テスト

| テストケース | 操作手順               | 期待結果                   |
| ------------ | ---------------------- | -------------------------- |
| PERF-001     | 長時間の連続使用       | メモリリークが発生しない   |
| PERF-002     | 大量の単語帳データ表示 | スムーズにスクロールできる |
| PERF-003     | 音声データの処理       | メモリ使用量が適切な範囲内 |

## 6. セキュリティテスト

### 6.1 入力値検証テスト

| テストケース | 操作手順                   | 期待結果                 |
| ------------ | -------------------------- | ------------------------ |
| SEC-001      | SQL インジェクション試行   | 適切にサニタイズされる   |
| SEC-002      | XSS 攻撃試行               | スクリプトが実行されない |
| SEC-003      | 大容量ファイルアップロード | 適切なサイズ制限         |

### 6.2 API セキュリティテスト

| テストケース | 操作手順                       | 期待結果                           |
| ------------ | ------------------------------ | ---------------------------------- |
| SEC-004      | 不正な Origin からのリクエスト | CORS エラーが発生                  |
| SEC-005      | API キーの露出確認             | クライアントサイドに露出していない |

## 7. アクセシビリティテスト

### 7.1 キーボードナビゲーション

| テストケース | 操作手順                 | 期待結果                 |
| ------------ | ------------------------ | ------------------------ |
| A11Y-001     | Tab キーでの要素移動     | 論理的な順序で移動できる |
| A11Y-002     | Enter キーでのボタン操作 | 適切に動作する           |

### 7.2 スクリーンリーダー対応

| テストケース | 操作手順                   | 期待結果                     |
| ------------ | -------------------------- | ---------------------------- |
| A11Y-003     | aria-label の確認          | 適切なラベルが設定されている |
| A11Y-004     | エラーメッセージの読み上げ | エラー内容が適切に伝わる     |

## 8. 互換性テスト

### 8.1 ブラウザ互換性（Web 版）

| ブラウザ | バージョン | テスト項目   |
| -------- | ---------- | ------------ |
| Chrome   | 最新版     | 全機能テスト |
| Firefox  | 最新版     | 全機能テスト |
| Safari   | 最新版     | 全機能テスト |
| Edge     | 最新版     | 全機能テスト |

### 8.2 デバイス互換性（Mobile 版）

| デバイス | OS          | テスト項目   |
| -------- | ----------- | ------------ |
| iPhone   | iOS 15+     | 全機能テスト |
| Android  | Android 10+ | 全機能テスト |

## 9. 回帰テスト

### 9.1 リリース前チェックリスト

- [ ] 全ての正常系テストが通過
- [ ] 主要な異常系テストが通過
- [ ] パフォーマンステストが基準値内
- [ ] セキュリティテストが通過
- [ ] 両プラットフォームでの動作確認

### 9.2 自動テスト項目

- API エンドポイントの応答確認
- 基本的な UI 要素の表示確認
- 主要機能の動作確認

## 10. テスト実行ガイドライン

### 10.1 テスト環境準備

1. サーバーの起動確認
2. 外部 API（Google Cloud, Notion）の接続確認
3. テストデータの準備

### 10.2 テスト実行順序

1. ナビゲーション機能テスト
2. 翻訳機能テスト
3. 単語帳機能テスト
4. 会話練習機能テスト
5. パフォーマンステスト
6. セキュリティテスト

### 10.3 バグレポート項目

- テストケース ID
- 再現手順
- 期待結果
- 実際の結果
- 環境情報（ブラウザ/デバイス）
- スクリーンショット/動画

## 11. テスト完了基準

### 11.1 品質基準

- 正常系テスト: 100% 通過
- 異常系テスト: 95% 以上通過
- パフォーマンステスト: 全項目基準値内
- セキュリティテスト: 100% 通過

### 11.2 リリース判定基準

- 致命的バグ: 0 件
- 重要バグ: 2 件以下
- 軽微バグ: 10 件以下
- ユーザビリティ問題: 5 件以下
